<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MuGen Wallpaper — Web wallpaper demo 1</title>
    <meta
      name="description"
      content="Demo page generated by MuGen Wallpaper showing a web wallpaper setup. This demo is intended for GitHub Pages hosting."
    />
    <link
      rel="canonical"
      href="https://dreaminghk.github.io/mugenwallpaper-demo1/demo.html"
    />

    <!-- Open Graph: improves link previews on social platforms -->
    <meta property="og:site_name" content="MuGen Wallpaper Demo" />
    <meta
      property="og:title"
      content="MuGen Wallpaper — Web wallpaper demo 1"
    />
    <meta
      property="og:description"
      content="Demo page generated by MuGen Wallpaper showing a web wallpaper setup."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://dreaminghk.github.io/mugenwallpaper-demo1/demo.html"
    />
    <!-- Optional thumbnail if you add one later -->
    <!-- <meta property="og:image" content="/path/to/thumbnail.png"> -->

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="MuGen Wallpaper — Web wallpaper demo 1"
    />
    <meta
      name="twitter:description"
      content="Demo page generated by MuGen Wallpaper showing a web wallpaper setup."
    />

    <!-- GitHub Pages / browser theming -->
    <meta name="theme-color" content="#000000" />

    <!-- Generator and attribution (kept in metadata and comments) -->
    <meta
      name="generator"
      content="MuGen Wallpaper (https://www.mugenwallpaper.com)"
    />

    <!-- Structured data (hidden from rendered page) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "MuGen Wallpaper — Web wallpaper demo 1",
        "description": "Demo page generated by MuGen Wallpaper showing a web wallpaper setup.",
        "url": "https://dreaminghk.github.io/mugenwallpaper-demo1/demo.html",
        "creator": {
          "@type": "Organization",
          "name": "MuGen Wallpaper",
          "url": "https://www.mugenwallpaper.com"
        }
      }
    </script>

    <!-- Hidden developer information: will not display in video or page UI -->
    <!--
		Source: MuGen Wallpaper demo repository
		Repo: https://github.com/dreaminghk/mugenwallpaper-demo1
		Creator: dreaminghk
		Generated: 2025-09-14
		License: Please see the original assets and MuGen Wallpaper license on https://www.mugenwallpaper.com
		Notes: Keep these comments for attribution. They are only visible in page source.
	-->
  </head>
  <body>
    <style>
      /* Make the page and #element fill the viewport with no margin/padding */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      /* Use blue_sky.jpg as a full-screen responsive background while preserving aspect ratio */
      body {
        background-image: url('blue_sky.jpg');
        background-size: cover; /* scale the image to cover the viewport while keeping aspect ratio */
        background-position: center center; /* center the image */
        background-repeat: no-repeat;
        background-attachment: fixed; /* optional: keeps background fixed during scroll */
        /* fallback background color while image loads */
        background-color: #000;
      }

      /* Keep #element full viewport and transparent so background shows through */
      #element {
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        display: block;
        background: transparent;
      }
    </style>

    <div id="element"></div>

    <!-- Fullscreen transparent canvas for procedural clouds (WebGL) -->
    <canvas id="clouds" aria-hidden="true"></canvas>

    <script>
      // WebGL procedural clouds: renders an animated FBM noise cloud layer
      (function () {
  const canvas = document.getElementById('clouds');
  // Request a WebGL context with alpha and without premultiplied alpha to simplify blending
  const gl = canvas.getContext('webgl', { alpha: true, antialias: true, premultipliedAlpha: false });
        if (!gl) return; // WebGL not available

        // resize handling
        function resize() {
          const dpr = Math.max(1, window.devicePixelRatio || 1);
          const w = Math.floor(window.innerWidth * dpr);
          const h = Math.floor(window.innerHeight * dpr);
          if (canvas.width !== w || canvas.height !== h) {
            canvas.width = w;
            canvas.height = h;
            canvas.style.width = window.innerWidth + 'px';
            canvas.style.height = window.innerHeight + 'px';
            gl.viewport(0, 0, w, h);
          }
        }

        // Make canvas full-screen and on top of background but behind UI
        Object.assign(canvas.style, {
          position: 'fixed',
          left: '0',
          top: '0',
          width: '100vw',
          height: '100vh',
          pointerEvents: 'none',
          zIndex: 1,
        });
        // ensure CSS background is transparent in case user-agent paints a default
        canvas.style.background = 'transparent';

        // vertex shader (simple passthrough)
        const vsSource = `
          attribute vec2 a_pos;
          varying vec2 v_uv;
          void main() {
            v_uv = a_pos * 0.5 + 0.5;
            gl_Position = vec4(a_pos, 0.0, 1.0);
          }
        `;

        // fragment shader: FBM noise + coloring to create soft clouds
        const fsSource = `
          precision highp float;
          varying vec2 v_uv;
          uniform float u_time;
          uniform vec2 u_resolution;

          // Simple pseudo-random
          float hash(vec2 p) { return fract(sin(dot(p,vec2(127.1,311.7))) * 43758.5453123); }

          // Value noise
          float noise(vec2 p) {
            vec2 i = floor(p);
            vec2 f = fract(p);
            // four corners
            float a = hash(i);
            float b = hash(i + vec2(1.0, 0.0));
            float c = hash(i + vec2(0.0, 1.0));
            float d = hash(i + vec2(1.0, 1.0));
            vec2 u = f * f * (3.0 - 2.0 * f);
            return mix(a, b, u.x) + (c - a) * u.y * (1.0 - u.x) + (d - b) * u.x * u.y;
          }

          // Fractal Brownian Motion
          float fbm(vec2 p) {
            float v = 0.0;
            float a = 0.5;
            mat2 m = mat2(1.6, 1.2, -1.2, 1.6);
            for (int i = 0; i < 5; i++) {
              v += a * noise(p);
              p = m * p * 1.9;
              a *= 0.5;
            }
            return v;
          }

          void main() {
            vec2 uv = v_uv * u_resolution / min(u_resolution.x, u_resolution.y);
            // animate the sample coordinates
            float t = u_time * 0.03;
            vec2 q = uv + vec2(t * 0.7, t * 0.3);
            float n = fbm(q * 1.3);
            float clouds = smoothstep(0.45, 0.8, n);

            // Add finer detail
            float detail = fbm(q * 3.0 + 100.0);
            clouds += 0.15 * detail;
            clouds = clamp(clouds, 0.0, 1.0);

            // color: white clouds with soft edges
            vec3 cloudColor = vec3(1.0);
            float alpha = clouds * 0.45; // semi-transparent; lowered so sky shows through

            // darken slightly based on cloud density for depth
            cloudColor *= mix(0.9, 1.0, clouds);

            // final output: premultiplied alpha-like blending
            gl_FragColor = vec4(cloudColor, alpha);
          }
        `;

        // utility: compile shader
        function compileShader(type, source) {
          const s = gl.createShader(type);
          gl.shaderSource(s, source);
          gl.compileShader(s);
          if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) {
            console.error('Shader compile error:', gl.getShaderInfoLog(s));
            gl.deleteShader(s);
            return null;
          }
          return s;
        }

        const vs = compileShader(gl.VERTEX_SHADER, vsSource);
        const fs = compileShader(gl.FRAGMENT_SHADER, fsSource);
        const prog = gl.createProgram();
        gl.attachShader(prog, vs);
        gl.attachShader(prog, fs);
        gl.bindAttribLocation(prog, 0, 'a_pos');
        gl.linkProgram(prog);
        if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {
          console.error('Program link error', gl.getProgramInfoLog(prog));
          return;
        }
  gl.useProgram(prog);
  // Enable alpha blending so clouds composite over the page background
  gl.enable(gl.BLEND);
  gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);

        // fullscreen triangle
        const quad = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, quad);
        const verts = new Float32Array([-1, -1, 3, -1, -1, 3]);
        gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW);
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);

        // uniforms
        const u_time = gl.getUniformLocation(prog, 'u_time');
        const u_resolution = gl.getUniformLocation(prog, 'u_resolution');

        let start = performance.now();

        function render() {
          resize();
          const now = performance.now();
          const t = (now - start) / 1000.0;
          gl.clearColor(0, 0, 0, 0);
          gl.clear(gl.COLOR_BUFFER_BIT);
          gl.useProgram(prog);
          gl.uniform1f(u_time, t);
          gl.uniform2f(u_resolution, canvas.width, canvas.height);
          gl.drawArrays(gl.TRIANGLES, 0, 3);
          requestAnimationFrame(render);
        }

        // start
        resize();
        window.addEventListener('resize', resize);
        requestAnimationFrame(render);
      })();
    </script>

  </body>
</html>
